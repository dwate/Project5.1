<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Orinoco, vintage camera, vintage photography, retro cameras">
    <meta name="description" content="Orinoco the vintage camera company, supplying your vintage photography needs">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <link rel="shortcut icon" type="image/png" href="img/favicon.png">
    <link href="css/style.css" type="text/css" rel="stylesheet">

    <title>Orinoco- Vintage Camera Shop</title>

</head>
<header>
<div class="orinoco">
<img src="img/brand.jpg" alt="Orinoco- Vintage Cameras company logo" title="orinoco- vintage cameras" width="50%" height="50%">
</div>
<h3 class="vinShop">The Vintage Camera Shop</h3>
<div class="headLinks">
    <div class="home">
        <a href="index.html" title="Home" alt="link to Orinocco Homepage" >Home</a>
    </div>
    <div class="dropdown">
        <button class="dropbtn">Products</button>
        <div class="dropdown-content">
          <a href="ProductPage.html">Carl Zeiss Ikon</a>
          <a href="#">Minolta GX9</a>
          <a href="#">Kodak No.1a</a>
        </div>
    </div>
    <div class="cart">
        <button class="cart-btn" id="cartBtn" onclick= "showCart()">Cart</button>
    </div> 
   
</div>
</header>

<body>
  
<h3 class="welcome">Welcome to Orinoco- Your one stop shop for all your vintage photography needs.</h2>
<br>
<hr>
<h2>Latest Products</h2>
 
<div id= "cameras"></div>
<script type= "text/javascript">

  //   document.getElementById('btn1').addEventListener('mouseleave', findCamera);
    //  document.getElementById('btn1').onload = function() {findCamera()});

 //   function findCamera(){
        var xhttp = new XMLHttpRequest();
      //  console.log(xhttp);
           xhttp.onload = function() {
             if (this.readyState == 4 && this.status == 200) {
             var cameras = JSON.parse(this.responseText);
           
             var output = '';
         //   let camInfo = '3';

             for(var i in cameras){
             output += '<div id="camDetails">' +
             '<h2>'+cameras[i].name+'</h2>' +
             '<p><img src="' +cameras[i].imageUrl+ '" alt="' +cameras[i].name+ '" width="250"/></p>' +
             '<div><p>' +cameras[i].description+ '</p>' +
             '<p>' +'£'+ +cameras[i].price+ '</p>' +
             '<button id="' +[i]+'" onclick="moreInfo('+[i]+')">' +'More Info'+ '</button>' +
             '<button onclick="addToCart(i=' +[i]+ ')">' +'Add to Cart'+ '</button></div>' +
             '<p>' +[i]+ '</p>' +
             '</div>'
             // console.log(cameras);
            }
           
            document.getElementById('cameras').innerHTML = output;
        //    const camDet = document.getElementById('camDetails');
 
          //  camDet.classList.add('itemInfo');
            }
          };

    xhttp.open("GET", "http://localhost:3000/api/cameras", true)
    xhttp.send();

    //open webpage more info
    function moreInfo(camInfo) {
 
   // var camID = camInfo;
  //  console.log(camID);
    
    sessionStorage.setItem(camInfo, 1);
    console.log(camInfo);
   window.open("ProductPage.html", self);
    } 
  
    //Display Cart Overlay
    function showCart(){
      console.log("open cart");
      document.getElementById('cart-overlays').className = "transparentBcg";
    }
      //close cart overlay
      function hideCart(){
      console.log("cart closed");
      document.getElementById('cart-overlays').className = "cart-overlay";
      }
    
    //Add item to Cart
   // var cartOutput =''; 
    function addToCart() {
    //  console.log(camerasCart);
      var xhttp2 = new XMLHttpRequest();
      xhttp2.onload = function() {
             if (this.readyState == 4 && this.status == 200) {
             var camerasCart = JSON.parse(this.responseText);
      for(var i in camerasCart){
        cartOutput += '<div class="cart-item" id="cart-items">' +
         '<p><img src="' +camerasCart[i].imageUrl+ '" alt="' +camerasCart[i].name+ '" width="20%" height="20%"/></p>' +
         '<h4>'+camerasCart[i].name+'</h4>' +
         '<p>' +'£'+ +camerasCart[i].price+ '</p>' +
           '</div>'
      }
      console.log(camerasCart);
      document.getElementById('cart-contents').innerHTML = cartOutput;
      xhttp2.open("GET", "http://localhost:3000/api/cameras", true)
    xhttp2.send();
    
             }
            }
    };
    /*  cartOutput += '<div class="cart-item" id="cart-items">' +
         '<p><img src="' +cameras[i].imageUrl+ '" alt="' +cameras[i].name+ '" width="20%" height="20%"/></p>' +
         '<h4>'+cameras[i].name+'</h4>' +
         '<p>' +'£'+ +cameras[i].price+ '</p>' +
           '</div>'
     */


</script>
<script src="main.js"></script>
<!--cart-->
<div class="cart-overlay" id="cart-overlays">
  <div class="cart" id="cartBox">
    <span class="close-cart">

    </span>
    <button class="close-btn" id="closeCartBtn" onclick="hideCart()">X</button>
    <h2>Cart</h2>
    <div class= "cart-content" id="cart-contents">
      <!--cart item-->
      <div class="cart-item" id="cart-items">
        <img src="./img/vcam_1.jpg" alt="camera picture" width="20%" height="20%" />
        <div>
          <h4>Camera</h4>
          <h5>price</h5>
          <span class="remove-item"></span>
        </div>
        <div>
          <button class="minus-btn">-</button>
          <p class="item-amount">1</p>
          <button class="plus-btn">+</button>      
          </div>
      </div>
    </div>
      <div class="cart-footer">
        <h3>Your Total: £ <span class="cart-total" id="cart-totals">0</span></h3>
        <button class="clear-cart" id="clearCartBtn">clear cart</button>
      </div>
  </div>
</div>
<hr>
</body>
<footer>
 <div class="foot">
   <p>Create by Dave 2020</p>
 </div>   
</footer>

</html>